!function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="http://localhost:5260/",a(a.s=1)}([,function(e,t){function a(e,t,a,n,o,i,r){try{var l=e[i](r),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function l(e){a(r,o,i,l,s,"next",e)}function s(e){a(r,o,i,l,s,"throw",e)}l(void 0)})}}$(document).ready(function(){$.getScript("/survive/Parser.js").done(function(e,t){$.getScript("/survive/Player.js").done(function(e,t){$.getScript("/survive/createGame.js").done(function(e,t){!function(){var e=0,t=!1,a=1,o=0,i=void 0,r=!1,l=new Date(1987,11,13,2,44,0,0),s="Dec 13, 1987 2:44",c=$(".survive-content").width();$(".nav-tabs").height(),$(".tickdisplay").text(s).hide(),$(".mainconsole").show(),$(".linebox").css({width:c/4*3+"px"}),$(".nav-badge").css("backgroundColor","#990000"),$(window).resize(b),$(".nav-tab").on("mouseenter",function(){$(this).stop().animate({backgroundColor:"#330000"},300)}).on("mouseleave",function(){$(this).stop().animate({backgroundColor:"#595959"},400)}).on("click",function(){var e=$(this).attr("id");!function(e){a!=e&&($("#gameview"+e).css({right:"800px"}),""!=$(".nav-badge"+e).text()&&2!=e&&$(".nav-badge"+e).text(""),$("#gameview"+a).fadeOut({queue:!1,duration:150}).animate({left:"800px"},100,function(){$("#gameview"+a).css({left:"0px"}),$("#gameview"+e).fadeIn({queue:!1,duration:150}).animate({right:"800px"}),a=e}),1==e&&$(".commandline").focus())}(parseInt(e.substr(e.length-1)))}),$(".modal-bg").on("click",function(){$(this).hasClass("info-modal-bg")&&$(".info-modal-bg").hide(),$(".drop-counter").remove()}).children().on("click",function(e){return!1}),$(".line-area").on("mousedown touchstart",function(e){r||(t=!0,i=setInterval(function(){o<101&&($(".linebox").css({bottom:"-=4px"}),o+=1,console.log(o))},40))}).on("mouseout touchend",function(){t=!1,clearInterval(i),r=!0,$(".linebox").stop().animate({bottom:"+="+4*o+"px"},200),o=0,setTimeout(function(){r=!1},1500)}),Player.locale=gameMap.for_car,b();var d=setTimeout(function(){m(),w()},6500);function u(){return function(){return n(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t||(e%8==0&&(p(),$(".tickdisplay").text(s)),Player.health<1&&E(),$(".hp-amt").text(Player.health),$(".temp-amt").text(Player.temperature),$(".sanity-amt").text(Player.sanity),0==Player.inCombat?(Player.onTick(e),Player.locale.onTick(e)):I(e));case 1:case"end":return a.stop()}},a,this)})).apply(this,arguments)}.apply(this,arguments)}function m(){return function(){return n(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:appendLine("The engine stalls."),setTimeout(function(){appendLine("Your car comes to a stop.")},1e3);case 2:if(e<999999999)return u(),999999998<(e+=1)&&(e=0),t.next=8,h(800);t.next=12;break;case 8:a=$("p:first").css("bottom"),1e3<parseInt(a)&&$("p:first").remove(),t.next=2;break;case 12:case"end":return t.stop()}},t,this)})).apply(this,arguments)}.apply(this,arguments)}function p(){return function(){return n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.setMinutes(l.getMinutes()+1),e.t0=l.getMonth(),e.next=0===e.t0?4:1===e.t0?6:2===e.t0?8:3===e.t0?10:4===e.t0?12:5===e.t0?14:6===e.t0?16:7===e.t0?18:8===e.t0?20:9===e.t0?22:10===e.t0?24:11===e.t0?26:28;break;case 4:return s="Jan",e.abrupt("break",28);case 6:return s="Feb",e.abrupt("break",28);case 8:return s="Mar",e.abrupt("break",28);case 10:return s="Apr",e.abrupt("break",28);case 12:return s="May",e.abrupt("break",28);case 14:return s="Jun",e.abrupt("break",28);case 16:return s="Jul",e.abrupt("break",28);case 18:return s="Aug",e.abrupt("break",28);case 20:return s="Sep",e.abrupt("break",28);case 22:return s="Oct",e.abrupt("break",28);case 24:return s="Nov",e.abrupt("break",28);case 26:return s="Dec",e.abrupt("break",28);case 28:s=s+" "+l.getDate()+", "+l.getFullYear()+" "+l.getHours()+":"+(l.getMinutes()<10?"0":"")+l.getMinutes();case 29:case"end":return e.stop()}},e,this)})).apply(this,arguments)}.apply(this,arguments)}function h(e){return new Promise(function(t){return setTimeout(t,e)})}function f(e,t){var a=$.map(e.split(""),function(e){return $("<span>"+e+"</span>")}),n=$("#splash-sub"+t),o=0,i=setInterval(function(){a[o].appendTo(n).hide().fadeIn(80),(o+=1)>=a.length&&(clearInterval(i),o=0)},80);setTimeout(function(){$(".splash-subtitle").fadeOut(400)},3300)}$(".commandline").on("keydown",function(e){if(13==e.keyCode){0<o&&(a=50*o,$(".linebox").stop().animate({bottom:"+="+a+"px"}),o=0);var t=$(".commandline").val();t=t.trim(),$(".commandline").val(""),Parser.parse(t)}var a}),document.addEventListener("addConsoleNotify",function(){1!=a&&(""==$(".home-badge").text()?$(".home-badge").text("1"):$(".home-badge").text(parseInt($(".home-badge").text())+1))}),$(".combat-input").on("keydown",function(e){if(13==e.keyCode){var t=$(".combat-input").val();t=t.trim(),$(this).val("")}}),executeCommand=function(e){switch(e[0]){case"GO":var t=e[1];a=t,console.log(a),0!=Player.locale.exits[a]?0!=Player.locale.exitPhrases[a]?(appendLine(Player.locale.exitPhrases[a]),setTimeout(function(){x(a)},1500)):x(a):appendLineR(["You can't go that way.","There's nothing in that direction.","There's something in the way."])}var a},$(function(){var e=["A dirt backroad.","Caledonia County, Vermont.","December 13th, 1987. 2:44AM."];f(e[0],0),f(e[1],1),f(e[2],2);var t=setTimeout(y,3500);$(".splash-screen").on("mousedown",function(){$(this).off(),console.log("aosidjf"),t&&(clearTimeout(t),$(".splash-subtitle").fadeOut(400),y(),setTimeout(function(){$(".splash-title").animate({bottom:"+=200px",opacity:"0"},1e3,function(){clearTimeout(d),m(),w()})},800))})});var y=function(){console.log("bop");var e=$.map("Survive.".split(""),function(e){return $("<span>"+e+"</span>")}),t=$(".splash-title"),a=0,n=setInterval(function(){e[a].appendTo(t).hide().fadeIn(180),(a+=1)>=e.length&&(clearInterval(n),a=0)},180);setTimeout(function(){$(".splash-screen").fadeOut(),$(".tickdisplay").fadeIn(1200),L()},3200)};function b(){var e=$(".nav-tabs").width(),t=$(".nav-tabs").height();$(".nav-tab").css({width:e/4-3+"px",height:t+"px"})}function v(e,t,a){var n=$('<div class="modal-btn-text">'+e+"</div>"),o=$('<div class="modal-btn info-modal-btn" id="modal-btn'+($(".info-modal-btn").length+1)+'"></div>');null===a?o.on("click",t):o.on("click",a,t),o.append(n),$(".info-modal-btns").append(o).css({"grid-template-columns":"repeat("+$(".info-modal-btn").length+", 1fr)"})}function g(e){Player.items[e.data.itemid];var t=parseInt($(".item-count").html());if(0<t){var a=t-1;$(".item-count").text(a)}}function P(e){var t=Player.items[e.data.itemid],a=parseInt($(".item-count").html());a<t.count&&$(".item-count").html(a+1)}function w(){$(".console-exits li").remove();for(var e=0;e<Player.locale.exits.length;e++)if(0!=Player.locale.exits[e]){var t=CARDINAL_FULL[e],a=$('<strong><li class="console-exit-dir">'+t+"</li></strong>"),n=$('<li class="console-exit-name">'+gameMap[Player.locale.exits[e]].display+"</li>");$(".console-exits").append(a).append(n)}}function x(e){Player.lastLocale=Player.locale,Player.locale=gameMap[Player.locale.exits[e]],Player.locale.visits+=1,appendLine(Player.locale.enterPhrase),w(),0<Player.locale.enemies.length&&rollEnemySpawns(Player.locale.enemies),0<Player.locale.loot.length&&rollLootTables(Player.locale.loot),L(),$(".locale-title").text(Player.locale.display.toUpperCase())}function k(){$(".loc-container").on("click",function(){var e=$(this).attr("id"),t=Player.locale.containers[e.substr(e.length-1)];if(console.log(t),t.locked)return appendLineR(["It won't open.","It's locked.","It appears to be locked.","It's sealed shut with a lock."]),!1;if(0<t.loot.length&&rollLootTables(t.loot),0<t.contains.length)for(var a=0;a<t.contains.length;a++)addItem(t.contains[a][0],t.contains[a][1],Player.locale.name);t.contains=[];var n=$('<span class="container-empty">(empty)</span>');$(this).append(n),appendLineR(["You find something inside.","There's something inside.","You've found something."]),L()}),$(".loc-li").off().on("click",function(){var e=$(this).attr("id");!function(e){var t=Player.locale.items[e];if(function(e){for(var t=0;t<Player.items.length;t++)if(Player.items[t].name==e)return!0;return!1}(t.name)&&1==t.stackable){for(var a=0;a<Player.items.length;a++)Player.items[a].name==t.name&&(Player.items[a].count+=t.count);Player.locale.items.splice(e,1),L()}else Player.items.push(t),$("#loc-item"+e).slideUp(110,function(){appendLine("You pick up the "+t.name.toLowerCase()+"."),Player.locale.items.splice(e,1),L()})}(e.substr(e.length-1))}),$(".inv-li").off().on("click",function(){!function(e,t){if($(".info-modal-btns").empty(),"item"==e){var a=Player.items[t];null!=a.onUse&&v("Use",function(){a.onUse(),$(".info-modal-bg").fadeOut(100)},null),v("Drop",function(){!function(e){var t=Player.items[e];if(1<t.count){$(".modal-text").text("How many?");var a=$('<div class="drop-counter"></div>'),n=$('<div class="left-arrow"></div>').on("click",{itemid:e},g),o=$('<div class="item-count">'+t.count+"</div>"),i=$('<div class="right-arrow"></div>').on("click",{itemid:e},P);a.append(n).append(o).append(i),$(".modal-stuff").append(a),$(".info-modal-btns").empty(),v("Drop",T,{itemid:e})}else Player.items.splice(e,1),addItem(t.name,t.count,Player.locale.name),$(".info-modal-bg").fadeOut(100),L(),appendLine("You drop the "+t.name.toLowerCase()+".")}(t)},null),$(".modal-text").text(a.desc)}$(".info-modal-bg").fadeIn(150)}("item",$(this).attr("id").substr($(this).attr("id").length-1))})}function T(e){var t=Player.items[e.data.itemid],a=parseInt($(".item-count").html());if(a<1)return $(".info-modal-bg").fadeOut(100),void $(".drop-counter").remove();a==t.count?(addItem(t.name,a,Player.locale.name),Player.items.splice(e.data.itemid,1)):(Player.items[e.data.itemid].count-=a,addItem(t.name,a,Player.locale.name)),L(),k(),$(".info-modal-bg").fadeOut(100),$(".drop-counter").remove(),appendLine("You drop the "+t.name.toLowerCase()+".")}function L(){for(var e=Player.locale.items.length,t=0;t<Player.locale.containers.length;t++)0<Player.locale.containers[t].contains.length&&(e+=1);0<e&&2!=a?$(".inv-badge").text(e):$(".inv-badge").text(""),$(".igv-li").remove();for(var n=0;n<Player.locale.containers.length;n++){var o=Player.locale.containers[n],i=$('<li class="igv-li loc-container" id="loc-container'+n+'">'+o.name+"</li>");if(0==o.contains.length){var r=$('<span class="container-empty">(empty)</span>');i.append(r)}$(".locale-list").append(i)}for(var l=0;l<Player.locale.items.length;l++){var s=Player.locale.items[l];if(1<s.count)var c=$('<li class="igv-li loc-li" id="loc-item'+l+'" style="display:none;">'+s.name+" ("+s.count+")</li>");else c=$('<li class="igv-li loc-li" id="loc-item'+l+'" style="display:none;">'+s.name+"</li>");$(".locale-list").append(c),c.slideDown(110)}for(var d=0;d<Player.items.length;d++){console.log(Player.items.length);var u=Player.items[d];if(1<u.count)c=$('<li class="igv-li inv-li" id="inv-item'+d+'" style="display:none;">'+u.name+" ("+u.count+")</li>");else c=$('<li class="igv-li inv-li" id="inv-item'+d+'" style="display:none;">'+u.name+"</li>");$(".inventory-list").append(c),$(".igv-li").fadeIn()}k(),function(){for(var e=0;e<Player.items.length;e++){var t=Player.items[e];switch(t.name){case"Handwarmers":t.onUse=function(){Player.temperature<120?(Player.temperature+=10,appendLine("The handwarmers help fight the cold.")):appendLine("No need for those now."),function(e,t){for(var a=0;a<Player.items.length;a++)"Handwarmers"==Player.items[a].name&&(1<Player.items[a].count?Player.items[a].count-=1:Player.items.splice(a,1));L()}()};break;case"Flashlight":t.onUse=function(){Player.locale.name.substring(0,2)};break;case"Batteries":t.onUse=function(){useBatteries()};break;case"Tinder":t.onUse=function(){}}}}()}function C(e){var t,a,n;t=e[Math.floor(Math.random()*e.length)],a=$('<div class="combat-linebox"></div>'),n=$('<p class="combat-line"></p>').text(t),a.append(n),$(".combat-log").append(a),$(".combat-linebox").animate({bottom:"+=28px",opacity:"-=0.12"},100),$(".combat-linebox").position().top<$(".combat-enemystats").position().top+$(".combat-enemystats").outerHeight(!0)&&$(".combat-linebox").first().remove()}function I(e){if(Player.currentEnemy.health<1)return Player.inCombat=!1,Player.currentEnemy=void 0,console.log("combat end"),void $(".combat-modal-bg").fadeOut(100);if(Player.currentEnemy.cd<1){var t=Math.floor(Math.random()*Player.currentEnemy.abilities.length),a=Player.currentEnemy.abilities[t];switch(a[0]){case"normal":normalAttack(Player.currentEnemy,a[1],a[2],a[3]);break;case"intimidate":intimidateAttack(Player.currentEnemy,a[1],a[2],a[3])}}else Player.currentEnemy.cd-=1}function M(e,t){if("health"==e){Player.health-=t;var a;if(a=Player.health<26&&10<Player.health?"linear-gradient(to right, #ffcccc, #d9d9d9, #d9d9d9, #d9d9d9, #d9d9d9, #d9d9d9, #d9d9d9, #ffcccc)":Player.health<11&&5<Player.health?"linear-gradient(to right, #ffb3b3, #d9d9d9, #d9d9d9, #d9d9d9, #d9d9d9, #d9d9d9, #ffb3b3)":Player.health<6?"linear-gradient(to right, #ff9999, #d9d9d9, #d9d9d9, #d9d9d9, #d9d9d9, #d9d9d9, #ff9999)":"#d9d9d9",$(".mainconsole").css({background:a}),"none"!=$(".combat-modal-bg").css("display")){var n=$('<div class="php-damage" style="position:absolute;color:red;">'+t+"</div>").css({position:"absolute",color:"red",bottom:"65%",left:"25%",opacity:"1"});$(".combat-stat-list").append(n),$(".php-damage").animate({bottom:"+=30px",opacity:"0"},1e3,function(){$(this).remove()})}}else"sanity"==e&&(Player.sanity-=t)}function O(e,t){for(var a=e,n=[];a<=t+1;)n.push(a),a+=1;return randomFromSet(n)}function E(){var e,a,n,o,i;t=!0,$(".splash-subtitle").text(""),"none"==$(".modal-bg").css("display")&&$(".modal-bg").fadeOut(150),$(".splash-screen").fadeIn(1200),$(".splash-title").text(randomFromSet(["You have died.","You are dead.","You have perished.","Death embraces you."])),$("#splash-sub0").text("You survived"),$("#splash-sub1").text((e=l,a=new Date(1987,11,13,2,44,0,0),n=e.getTime()-a.getTime(),(o=Math.floor(n/36e5))+(1==o?" hour, ":" hours, ")+((i=Math.floor(n/6e4))+(1==i?" minute.":" minutes.")))),$("#splash-sub2").text(),$(".splash-subtitle").fadeIn(500);var r=$('<div class="splash-retry-btn">Retry</div>');$(".splash-titles").append(r)}function S(){var e=$(".combat-player-hp").css("width").substring(0,$(".combat-player-hp").css("width").length-1);Player.health!=parseInt(e)&&$(".combat-player-hp").stop().animate({width:Player.health+"%"},150);var t=$(".combat-player-sp").css("width").substring(0,$(".combat-player-sp").css("width").length-1);Player.currentEnemy.sanity!=parseInt(t)&&$(".combat-player-sp").stop().animate({width:Player.sanity+"%"},300);var a=$(".combat-enemy-hp").css("width").substring(0,$(".combat-enemy-hp").css("width").length-1),n=Player.currentEnemy.health/Player.currentEnemy.maxHealth*100;Player.currentEnemy.health!=parseInt(a)&&$(".combat-enemy-hp").stop().animate({width:n+"%"},150)}startCombat=function(t){Player.inCombat=!0,Player.lastCombat=e,Player.currentEnemy=t,$(".combat-enemytitle").text(t.display),$(".combat-modal-bg").fadeIn(100),$(".combat-input").focus()},intimidateAttack=function(e,t,a,n){e.cd=e.speed-1,M("health",O(t,a)),"growl"==n&&C(["The "+e.display.toLowerCase()+" lets out a ferocious growl.","The "+e.display.toLowerCase()+" snarls aggressively.","The "+e.display.toLowerCase()+" startles you with a loud growl.","The "+e.display.toLowerCase()+" emits a guttural growl."]),$(".combat-enemy-cd").css({width:"100%"}).stop().animate({width:"0%"},800*(Player.currentEnemy.cd+1),"linear"),S()},normalAttack=function(e,t,a,n){e.cd=e.speed;var o=Math.floor(100*Math.random());e.attack>o?(M("health",O(t,a)),"bite"==n&&C(["The "+e.display.toLowerCase()+" gnashes its teeth and bites you.","The "+e.display.toLowerCase()+" sinks its teeth into your arm.","The "+e.display.toLowerCase()+" bites you.","The "+e.display.toLowerCase()+" attacks you with its ravenous bite.","You wince in pain as the "+e.display.toLowerCase()+" bites you."])):"bite"==n&&C(["The "+e.display.toLowerCase()+" misses its bite.","The "+e.display.toLowerCase()+" lunges forward but misses.","The "+e.display.toLowerCase()+"'s bite barely misses your neck.","The "+e.display.toLowerCase()+"'s bite barely misses your leg.","The "+e.display.toLowerCase()+"'s bite barely misses your body.","The "+e.display.toLowerCase()+" attempts to bite you but misses."]);$(".combat-enemy-cd").css({width:"100%"}).stop().animate({width:"0%"},800*(Player.currentEnemy.cd+1),"linear"),S()}}()})})})})}]);